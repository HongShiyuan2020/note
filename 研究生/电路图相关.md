
## 目的与初步思考

我们要制作的是一个针对测量电阻阻值实验的电路图绘制软件。其初步形式为以现实实验视频（包含电路连接画面）或连接好的现实电路图片为软件处理对象，经过算法处理得到并绘制出电路图形式的抽象表示。如何完成这个任务呢？这里我们已经有了一个提示——利用目标检测技术。

首先什么是目标检测技术呢？

> 目标检测（Object Detection）的任务是**找出图像中所有感兴趣的目标（物体）**，确定它们的**类别**和**位置**，是计算机视觉领域的核心问题之一。由于各类物体有不同的外观、形状和姿态，加上成像时光照、遮挡等因素的干扰，目标检测一直是计算机视觉领域最具有挑战性的问题。

![[Pasted image 20240710125704.png]]
对于本任务中用到的目标检测技术，首先我们要定义出感兴趣的对象（对任务其关键作用的对象），算法在处理时，一般以图像为输入，输出图像中出现的预先定义的对象。其输出一般为“矩形框+类别”的格式，矩形框确定对象的位置，在一张二维图像中一般使用4个数字即可确定一个矩形框的位置如：“左上x坐标，左上y坐标，右下x坐标，右下y坐标”这样的坐标数字。类别确认矩形中框中的对象的类别。

那么如何将目标检测应用到这个任务中呢？

回到任务的目的来，我们的目的是绘制出电路图，可以利用的数据为描述电路连接情况的实物图片或视频。其实任务目的已经提出了问题的关键，即如何从图片或视频中提取出**电路连接情况**。需要注意的是，这里的**电路连接情况**不是指图片或视频中以图像形式展示的连接情况，这种直接的图像（视频可以一看做有序的图像序列）中的确包含了电路连接信息，但图像中存在大量与任务无关的信息，而前面提到的目标检测刚好以图像为输入，输出感兴趣的对象的位置和类别信息，而且这种信息可以很方便的被计算机程序处理。如此我们的大致思路为：利用目标检测提取图像中本任务感兴趣的对象，使用提取后的格式化并且易于处理的对象位置和类别数据，编写电路连接判断逻辑程序，判断电路连接情况，并编写电路图绘制程序绘制电路图。整体思路流程如图所示：
![[Pasted image 20240628201603.png]]
这样我们将面对如下几个核心问题：

1. 本任务中感兴趣的对象有哪些？
2. 如何得到目标检测模型？
3. 得到目标检测的结果后如何判断电路连接情况？
4. 得到电路连接情况后如何绘制出较为美观的电路图？

## 本任务中感兴趣的对象有哪些？

![[out1-005526.jpg]]

上图是一张测量电阻阻值实验中连接好的实物电路图片，图像中与电路连接关系密切的对象有：电流表、电压表、电源、电阻、滑动变阻器、开关这六个物理实验器件，连接个器件的导线，此外经过思考，可以发现各个器件上的接线柱也是判断连接的核心对象。因此，可以初步认为，本任务感兴趣的对象为：实验器件、导线和接线柱。

其中导线是一种特殊的对象，一根导线会连接两个接线柱，对于电路连接的判断（假设导线中间没有断开）来说，一根导线中最关键的信息在导线的两端，因为它们和接线柱直接连接，如果以整根导线为检测对象，后续工作还要从导线中提取出两端的位置信息同时判断这两端是否为同一根导线的两端。在前期我们测试过对导线不做处理直接检测，检测的效果难以达到要求，因此，我们对导线进行了预先的处理，在每根导线的两端绑上相同颜色的胶带，感兴趣的对象由整个导线转化为导线绑有彩色胶带的两端。其实在导线这里有两种对象的设置方案：

1. 不同颜色的线头设置为不同类别的对象
2. 所有导线线头设置为一个类别的对象，对提取到的线头使用其他分类模型判断其颜色。

我们测试并对比过两种方案，方案1的训练需要大量数据，在目前收集到的数据上检测效果并不好，对导线线头存在大量漏检和误检的情况。方案2的效果较好，且我们已有大量兼容的检测数据集。最后的方案中我们使用的是方案2。

最后，对于接线柱，也应该进行划分，这其中最重要的是电源正负极的判断，因此不能将所有接线柱当作同一类别的对象。不过好消息是，实验器材中的接线柱已经按正负极分为了两类——正极（红色接线柱）、负极（黑色接线柱）。

最终，我们定义的对象如下表所示：

| ID  | 类别名称             | 中文名称        |
| :---: | :----------------: | :-----------: |
| 0   | Battery          | 电源          |
| 1   | Switch Opened    | 断开的开关（电路断开） |
| 2   | Switch Closed    | 闭合的开关（电路接通） |
| 3   | Sliding Rheostat | 滑动变阻器       |
| 4   | Resistance       | 电阻          |
| 5   | Ammeter          | 电流表         |
| 6   | Voltmeter        | 电压表         |
| 7   | RT               | 正极          |
| 8   | BT               | 负极          |
| 9   | INT              | 导线接口        |
##  如何得到目标检测模型？

结合之前的经验，本项目中选择YOLOv8检测模型，检测图像中的对象。和常见的人工智能模型一样，把该模型应用到本任务中需要进行训练。在训练模型时我们要完成数据准备、模型训练和模型评估等任务。本任务检测部分希望达到的理想检测效果如下图所示：
![[out1-007676.jpg]]
### YOLOv8

YOLO (You Only Look Once) 是一种非常流行和高效的实时目标检测算法,它由 Redmon 等人在 2016 年提出。YOLOv8 是 YOLO 系列的较新版本,由 Ultralytics 公司开发维护。其详细信息可以在其[官网](https://docs.ultralytics.com/)查看。

### 数据准备

数据准备的第一阶段是录制实验视频或拍摄实验图片。在本任务中，我们录制了3段实验操作视频，使用Python脚本从视频中截取初步图像，之后人工去除重复内容的图像。
![[Pasted image 20240710141711.png]]
![[Pasted image 20240710141824.png]]

有了原始数据后需要对数据进行标注，其标注内容为检测框位置和类别，庆幸的是当前存在大量成熟的标注程序，在这里我们选用LabelImg标注图像数据，其具体标注步骤如下：

1. 安装Python（推荐安装Python 3.9）和 LabelImg
```shell
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple labelimg
``` 
2. 打开LabelImg
```shell
python labelimg
```
3. 右侧选择输出格式为yolo
	![[Pasted image 20240710142832.png]]
4. 设置输出文件夹,注意输出文件夹中要有一个名为classes.txt的文件保存对象类别
	![[Pasted image 20240710142917.png]]
5. 打开存放图像的文件夹注意图像文件夹中要有一个名为classes.txt的文件保存对象类别
	![[Pasted image 20240710142416.png]]
6. 在菜单栏选择Edit，选择Create RectBox
	![[Pasted image 20240710143147.png]]
7. 标注对象
	![[Pasted image 20240710143411.png]]
8. 点击下一张并保存结果
	![[Pasted image 20240710143508.png]]

### 模型训练与评估

准备好数据后进行模型训练与评估，模型训练是人工智能和机器学习领域的核心任务之一。它通过从大量数据中学习特征和规律,构建出能够预测、分类或生成新数据的数学模型。训练过程通常包括数据收集和预处理、模型架构设计、超参数调优以及模型评估等步骤。训练模型需要大量的计算资源和优化算法,最终目标是得到一个在新数据上表现良好的模型。

正常来说训练时要把数据集划分为训练集、测试集和验证集，但限于数据量不足，这里没有使用测试集，且验证集和训练集为同一数据集。训练最开始使用20机房3090Ti的机器，但速度太慢，换成了Kaggle上的Tesla P100，训练设置4000轮，如果模型收敛则提前结束，最终耗时20433秒（5~6个小时左右）
![[Pasted image 20240710144934.png]]

训练代码如下，使用了在8000张电路数据集上预先训练过的模型权重：
```python
from ultralytics import YOLO

model = YOLO("/kaggle/input/circuit/weight/yolov8n-8000.pt")
model.train(data="/kaggle/input/circuit/circuit.yaml", epochs=4000, imgsz=640)

model.val()
```

训练评估结果如下图所示：
![[Pasted image 20240710145311.png]]
![[Pasted image 20240710145327.png]]
![[Pasted image 20240710145525.png]]

从部分检测结构中可以看出，数据集不足影响了训练的结果，检测中存在接线柱和线头漏检的情况。这是后续提升性能表现的关键所在，后续工作需要收集更多的数据。

### 后续处理——线头颜色和接线柱仪器判断

当前训练的目标检测模型，无法区分线头颜色，因此还要设计方法区分不同线头。我在这里采用的方法为：将线头图片从图像中抠出，缩放为$32\times32\times3$图片，将它从RGB空间转换到HSV空间中，对数值进行归一化处理，展开为 3072 维的特征向量。同时手动标注线头颜色类别标签，构建一个线头数据集。以该数据集为基础，训练一个线头颜色分类器。

秉持模型尽量简单的宗旨，我首先尝试了一些机器学习领域常见的分类器如：逻辑回归、随机森林、朴素贝叶斯、SVM等。经过测试，随机森林设置为54棵决策树时效果最好，分类准确率达到96.4%。因此最终使用随机森林判别线头颜色。

最后，还要判断接线柱属于哪个仪器，这就比较简单，可以使用接线柱和器件之间的交并比（IOU）判断，选择最大交并比的器件为该接线柱位于的器件。经过后续处理，对象类别进行了进一步细分，细分后的对象类别如下所示：

| ID  | 类别名称             | 中文名称             |
| --- | ---------------- | ---------------- |
| 0   | Battery          | 电源               |
| 1   | Switch Opened    | 断开的开关（电路断开）      |
| 2   | Switch Closed    | 闭合的开关（电路接通）      |
| 3   | Sliding Rheostat | 滑动变阻器            |
| 4   | Resistance       | 电阻               |
| 5   | Ammeter          | 电流表              |
| 6   | Voltmeter        | 电压表              |
| 7   | BRT              | 电源正极（只需标注最外侧的一极） |
| 8   | BBT              | 电源负极（只需标注最外侧的一极） |
| 9   | SWRT             | 开关正极（红色）         |
| 10  | SWBT             | 开关负极（黑色）         |
| 11  | RT               | 电阻电极             |
| 12  | VBT              | 电压表负极            |
| 13  | VRT3             | 电压表3伏正极          |
| 14  | VRT15            | 电压表15伏正极         |
| 15  | ABT              | 电流表负极            |
| 16  | ART06            | 电流表0.6安正极        |
| 17  | ART3             | 电流表3安正极          |
| 18  | SRRT             | 滑变正极（红色）         |
| 19  | SRBT             | 滑变负极（黑色）         |
| 20  | RRI              | 导线红色接口           |
| 21  | DBI              | 导线深蓝接口           |
| 22  | LRI              | 导线浅红接口           |
| 23  | ROI              | 导线橙色接口           |
| 24  | RYI              | 导线黄色接口           |
| 25  | RGI              | 导线绿色接口           |
| 26  | LBI              | 导线浅蓝接口           |
## 得到目标检测的结果后如何判断电路连接情况？

有了上述操作，我们就可以得到对象的位置和类别信息。其程序中的格式如下所示：`cls` 中存放检测结果的对象类别信息，如第0个对象的类别为0即电源。`conf` 中存放结果的置信度。`coord`中存储对象的左上角x，y坐标和右下角下x，y坐标，坐标经过了归一化处理，如过一张图片宽度为640高度为480，则第一个对象的坐标为左上角$(0.1\times640, 0.2\times480)$右下角$(0.4\times640,0.5\times480)$。
![[Pasted image 20240628203522.png]]

电路连接情况的判定，都基于上面的数据进行。从上面的数据中可以直接得到的是器件的存在情况、接线柱和导线线头的坐标与类别。还没有直接的电路连接情况。为了得到电路的连接情况，我认为要进行下下列操作：

1. 判断导线和接线柱的连接情况（导线和哪个接线柱连接）
2. 判断接线柱之间通过导线的连接情况（接线柱通过导线和哪些接线柱连接）
3. 根据连接情况排列仪器以方便绘图
### 判断导线和接线柱的连接情况

在导线线头和接线柱的位置和类别都清楚的情况下，可以很容易的动过交并比（IOU）判断它们的连接情况。其判断过程如下：

1. 计算接线柱和导线两端的IOU矩阵，IOU即交并比。假设检测阶段共检测到了14个导线接口和12个接线柱，那么计算出来的IOU矩阵就是一个$14\times12$的矩阵，该矩阵的第$x$行第$y$列的元素表示第$x$个导线接口和第$y$个接线柱的交并比.
2. 根据IOU矩阵判断导线和接线柱的连接情况。在IOU矩阵中我们可以选择每一行最大值（不为0）的列下标所代表的接线柱与该行导线接口配对，即标志这个导线接口和这个接线柱相连接。通过这一步操作得到了导线接口和接线柱的连接情况，注意只是导线和接线柱的连接情况，目前还不清楚接线柱之间的连接情况。

本阶段可以获得一个如下的元组数组：每个元组的第一个数字表示导线线头类别ID，相同则表示为同一种颜色，第二个数字表示接线柱ID，一个元组，表示某个线头和某个接线柱连接在一起。

```python
bis = [(13, 1), (14, 2), (13, 5), (14, 4)]
```
### 判断接线柱之间通过导线的连接情况

在上个步骤中，我们确认了线头和接线柱的连接情况，由于同一根导线的两个线头颜色相同，因此，如果上一阶段输出的结构中，存在两个相同ID的线头与接线柱相连的情况，则可以判定这两个接线柱通过导线相连接。通过遍历上一阶段的结果，可以得到所有接线柱之间的连接情况，在这里，我将结果以图的形式存放在邻接表中，我把这个图称之为 $G$。
### 排列仪器

一般来说，有了$G$便可以直接绘制出电路图了，但要美观的绘制出电路图仍然是个困难的问题，直接画出的电路图如下图所示，存在导线交叉重叠的现象。我们的任务针对的是测电阻这类比较简单的电路，电路中也都是比较简单的串并联。经过分析，我认为导致导线交叉的重要原因是电路图中器件位置摆放的问题。因此，我需要根据$G$以当前的电路连接情况来动态生成仪器排列顺序，帮助绘图时仪器位置的确定。
![[Pasted image 20240628212549.png]]

排列的方法也很简单，首先从电源正极出发（这要求电源正极一定要在电路连接中），使用深度优先遍历（DFS）遍历电路图中的每个仪器（除电压表），遍历过程按遍历顺序将仪器ID存入有序数组中得到仪器排列。
## 得到电路连接情况后如何绘制出较为美观的电路图？

有了仪器的排列和表示连接情况的邻接表，绘图工作可以做的比较简单。这里我采用的方法如下为：

1. 固定仪器预选位置，如图青色位置为预先定义的仪器（除电压表）位置，其中最下方固定为电源位置。
	![[Pasted image 20240710155502.png]]
2. 根据仪器排列结果，按逆时针方向从电源出发连接电路
	![[Pasted image 20240710155954.png]]
3. 连接电压表，首先根据电压表的连接情况设置电压表为位置，然后使用A-Start算法连接电压表导线
	![[Pasted image 20240710160208.png]]
4. 连接其他电路，使用A-Star连接其他未遍历过的连接


## 其他

### 程序界面

![[Pasted image 20240710160620.png]]
![[Pasted image 20240710160650.png]]

### 程序目录结构
![[Pasted image 20240710160924.png]]
![[Pasted image 20240710160942.png]]

目录及核心文件说明：
- datasets：存放数据集
- imgs：程序截图保存位置
- labels：程序截图检测结果保存位置
- res：电路图绘制器件图片资源
- AStar.py：A-Star寻路算法实现
- config.json：配置文件，设置服务端IP，PORT、摄像头URL
- config.py：配置文件类
- detectDemo.py：目标检测测试代码
- draw.py：绘制电路图代码
- getCoordinate.py：检测结果格式转换代码
- Graph.py：电路连接判断核心代码
- interface_class.py：线头颜色判断训练代码
- main.py：实时视频程序运行代码
- req.py：向服务端发送请求代码
- selectImg.py：从视频总截取图片代码
- server.py：服务端代码
- static_img.py：静态图片程序运行代码
- train.py：检测模型训练代码
- video.py：视频显示、捕获、预处理代码
## 程序原理

### 总体流程

本程序的主要功能为以电学实验（测量电阻阻值）视频为输入，实时绘制处描述当前电路路连接情况的电路图。其整体流程如下图所示：以视频为输入，从视频中的采样得到一帧图像，图像经过目标检测得到对象类别和坐标，以此结果为基础经过处理得到电路的连接情况和器件存在情况，并将其保存在预先定义的数据结构中，电路图绘制阶段得到这些数据后即可绘制处相应的电路图。


### 功能界面

![[Pasted image 20240628201028.png]]

### 目标检测阶段

目标检测阶段使用YOLOv8目标检测器，针对该任务共定义了27种对象，如下表所示：其中0-6为实验中出现的器件，7-19为器件上的接线柱，20-26为缠有不同颜色胶带的导线两端。训练过程使用了YOLOv8n预训练模型，我使用的YOLOv8n还在之前学长标注的8000张左右的数据集中进行了预训练。

| ID  | 类别名称             | 中文名称             |
| --- | ---------------- | ---------------- |
| 0   | Battery          | 电源               |
| 1   | Switch Opened    | 断开的开关（电路断开）      |
| 2   | Switch Closed    | 闭合的开关（电路接通）      |
| 3   | Sliding Rheostat | 滑动变阻器            |
| 4   | Resistance       | 电阻               |
| 5   | Ammeter          | 电流表              |
| 6   | Voltmeter        | 电压表              |
| 7   | BRT              | 电源正极（只需标注最外侧的一极） |
| 8   | BBT              | 电源负极（只需标注最外侧的一极） |
| 9   | SWRT             | 开关正极（红色）         |
| 10  | SWBT             | 开关负极（黑色）         |
| 11  | RT               | 电阻电极             |
| 12  | VBT              | 电压表负极            |
| 13  | VRT3             | 电压表3伏正极          |
| 14  | VRT15            | 电压表15伏正极         |
| 15  | ABT              | 电流表负极            |
| 16  | ART06            | 电流表0.6安正极        |
| 17  | ART3             | 电流表3安正极          |
| 18  | SRRT             | 滑变正极（红色）         |
| 19  | SRBT             | 滑变负极（黑色）         |
| 20  | RRI              | 导线红色接口           |
| 21  | DBI              | 导线深蓝接口           |
| 22  | LRI              | 导线浅红接口           |
| 23  | ROI              | 导线橙色接口           |
| 24  | RYI              | 导线黄色接口           |
| 25  | RGI              | 导线绿色接口           |
| 26  | LBI              | 导线浅蓝接口           |

| ID  | 类别名称             | 中文名称        |
| --- | ---------------- | ----------- |
| 0   | Battery          | 电源          |
| 1   | Switch Opened    | 断开的开关（电路断开） |
| 2   | Switch Closed    | 闭合的开关（电路接通） |
| 3   | Sliding Rheostat | 滑动变阻器       |
| 4   | Resistance       | 电阻          |
| 5   | Ammeter          | 电流表         |
| 6   | Voltmeter        | 电压表         |
| 7   | RT               | 正极          |
| 8   | BT               | 负极          |
| 9   | INT              | 导线接口        |

#### 标注教程

标注工具网址：https://www.makesense.ai
![[Pasted image 20240617180308.png]]
![[Pasted image 20240617180331.png]]
![[Pasted image 20240617180453.png]]
![[Pasted image 20240617190309.png]]
选择labels.txt文件，或拖动labels.txt文件到相应位置（labels.txt文件与照片在同一文件夹内）
![[Pasted image 20240617190427.png]]
![[Pasted image 20240617173251.png]]
![[Pasted image 20240617173316.png]]
![[Pasted image 20240617173333.png]]
![[Pasted image 20240617190102.png]]![[Pasted image 20240617173429.png]]
##### 标注示例

标注如下图所示红色为实验器件、蓝色为接线柱、紫色为导线两端接口，以下细节要特别注意的地方：
- 同一根导线两端的接口用相同颜色的胶带绑住了，标注时要将胶带处放入框内，尽量把铜片或铜夹也包含在框内。
- 电源接线柱只要标注最外侧两个即可
- 存在遮挡情况时，如果对象大部分未被遮挡最好也标注一下


![[out1-007676.jpg]]

### 基于检测结果的电路连接判断阶段

经过检测后可以得到图像中对象的位置和类别信息，在这里我对YOLOv8输出的结果的格式进行了统一，其输出结果使用python中的字典存储，格式如下图所示：`cls` 中存放检测结果的对象类别信息，如第0个对象的类别为0即电源。`conf` 中存放结果的置信度。`coord`中存储对象的左上角x，y坐标和右下角下x，y坐标，坐标经过了归一化处理，如过一张图片宽度为640高度为480，则第一个对象的坐标为左上角$(0.1\times640, 0.2\times480)$右下角$(0.4\times640,0.5\times480)$。

![[Pasted image 20240628203522.png]]

本阶段的任务为以上面格式的数据为基础，获得接线柱的连接情况。本阶段可以划分为如下几个小步骤：
首先，我们可以把检测对象分成3大类——实验器件（电流表、电源等）、器件上的接线柱和缠有彩色胶带的导线两端。本阶段要做的第一件事便是把这三类对象从检测结果中划分出来。物理器件信息用于判断器件存在与否，接线柱和导线信息用于判断电路连接情况。
![[Pasted image 20240628204742.png]]
物理器件信息可以之间根据置信度把他们存入一个数组中，它们只用来表示器件是否存在即进入摄像头视野。本阶段的重点为根据接线柱和导线信息判断电路连接情况。其判断过程如下：

1. 计算接线柱和导线两端的IOU矩阵，IOU即交并比。假设检测阶段共检测到了14个导线接口和12个接线柱，那么计算出来的IOU矩阵就是一个$14\times12$的矩阵，该矩阵的第$x$行第$y$列的元素表示第$x$个导线接口和第$y$个接线柱的交并比.
2. 根据IOU矩阵判断导线和接线柱的连接情况。在IOU矩阵中我们可以选择每一行最大值（不为0）的列下标所代表的接线柱与该行导线接口配对，即标志这个导线接口和这个接线柱相连接。通过这一步操作得到了导线接口和接线柱的连接情况，注意只是导线和接线柱的连接情况，目前还不清楚接线柱之间的连接情况。
3. 同一根导线两端的接口使用了相同颜色的胶带缠绕，且相同颜色的导线接口会被识别为同一类对象，在上一步我们得到了导线接口和接线柱的连接情况。因此，我们可以认为，如果有两个接线柱与相同颜色的导线接口相连，那么这两个接线柱必定通过一根导线相连接。对于每个接线柱我们进行相同过程，即可得到接线柱之间的连接情况，将它保存在描述图的邻接表中。

本阶段的主要代码在Graph.py中：
![[Pasted image 20240628210918.png]]
### 电路图绘制阶段

在上个阶段我们得到了表示器件存在情况的数组和接线柱连接情况的图，本阶段基于这两个重要的数据绘制出电路图。其大致流程如图：
![[Pasted image 20240628211659.png]]
绘制器件比较简单，这里我预先定义六种器件的位置，如果检测器检测到某个器件存在，则在预先定义好的位置上画出对应器件。

而导线的连接方法就要认真考虑。好的导线连接要保证导线尽量不重叠，尽可能不交叉，而且长度应该尽量短。在这里我选择A-Star算法计算导线的路径，为了保证导线不重叠在代价计算时进行了细微的改变。下图是直接使用A-Star计算所得到的路径。可以看到电压表连线明显重叠，无法分辨。
![[Pasted image 20240628212549.png]]
为了应对这个问题，我改进了A-Star计算代价的过程。如果导线经过的某一个路径存在其他导线，那么经过该路径的代价将增加10。这样可以保证存在求得的路径尽量不会重合，但仍然可能交叉。但有些情况下导线交叉是不可避免的。这里我不在高铝这个问题，而是使用黑点表示导线两端的连接点，如果有交叉但交叉点上没有黑点，则认为该交叉处没有导线连接。
![[Pasted image 20240628212707.png]]
本阶段的代码在draw.py文件中，此外AStar.py文件中实现了基于A-Star算法的寻路函数。
![[Pasted image 20240628213352.png]]
### 绘制电路

- [x] 提取坐标数据
- [ ] 由坐标数据构建图
	- [x] 定义图的结构
	- [x] 定义图的操作
	- [ ] 实现构建方法
		- [x] 分离接线柱与接口
		- [x] 匹配接线柱与接口
- [ ] 再图的基础上绘制图
- [ ] 化简图
- [ ] 使用化简的图判断连接情况

#### 接线柱和对应ID

| 接线柱标签 | ID  |
| ----- | --- |
| BRT   | 0   |
| BBT   | 1   |
| SWRT  | 2   |
| SWBT  | 3   |
| RT    | 4   |
| RT    | 5   |
| ABT   | 6   |
| ART06 | 7   |
| ART3  | 8   |
| VBT   | 9   |
| VR3   | 10  |
| VRT15 | 11  |
| SRBT  | 12  |
| SRBT  | 13  |
| SRRT  | 14  |
### 颜色选择
![[Pasted image 20240701131210.png]]
红色、蓝色（深）、黄色、绿色、紫色、橙色、白色、紫红色


0： 366
1： 305
2： 319
3： 305
4： 269
5： 349
6： 338

总结：
1. 使用Python编写了一个脚本用于跟踪电路实验视频中的对象（电学实验中使用彩色胶带标注线头）。实验器件（电流表、电源等）的跟踪效果较好，接线柱和线头可以检测大部分对象，但跟踪效果较差且仍然存在错检和漏检的现象，对象运动速度较快时会识别为其他对象改变ID。同时，使用DeepSORT的跟踪对实时性能有较大影响和视频中待跟踪的对象数量相关，对象数量较多时会出现肉眼可见的低帧率。检测效果仍然高度依赖于检测器的判断结果，但可准确检测的对象的标注框的稳定性有所提升，晃动幅度减小。

总结：
1. 阅读了论文 GUIDE: A Guideline-Guided Dataset for Instructional Video Comprehension。本文传统的教学视频标注中往往关注任务的具体步骤，而对于同一类任务的教学视频其包含大量共有的引导性内容，但可能存在细节步骤上的不同（如顺序、内容）。针对该问题，本文提出如下内容：引入了一种新颖的指南引导教学视频理解数据集 GUIDE，设计了三个用于教学视频分析的子任务，对各种基础模型进行基准测试，并进行广泛的分析以提供详细的见解。GUIDE数据集可分为三部分——Task Query定义一个类型的任务，Guideline Steps同任务视频的操作大纲，Specific Steps每条大纲/视频中的具体操作。GUIDE构建涉及三个阶段——视频采集；自动标注：可分为Specific Steps生成和Guideline Steps生成，Specific Steps生成中使用Whisper生成字幕使用GPT-3.5-turbo生成Specific Steps，Guideline Steps生成中使用GPT-3.5-turbo聚类视频中的Specific Steps之后由GPT-4生成Guideline Steps；手动标注：对自动生成的数据进行纠错和微调。本文设计了三个用于教学视频分析的子任务——Step Captioning：生成视频中的一组教学步骤标题，Guideline Summarization：总结同类任务中的共同点，并生成Gudeline，Guideline-Guided Captioning：基于Guideline生成Specific Steps。结果表明，视频和语言基础模型在这三个子任务中都遇到了困难。同时，在Guideline的指导下生成的Specific Steps更加清晰准确，单视频理解能力是学习多视频的基础，需要更多的预训练和微调数据。与纯文本模型相比，视频基础模型性能下降显著，这表明需要更专业的视觉编码器和视觉语言桥来更好地表示时间过程。


### 电路分类

#### 按组件个数

3个：

![[Pasted image 20240913155720.png]]
4个：
![[Pasted image 20240913155956.png]]
![[Pasted image 20240913155908.png]]
![[Pasted image 20240913155736.png]]
![[Pasted image 20240913155747.png]]
5个：
![[Pasted image 20240913155941.png]]
![[Pasted image 20240913155847.png]]
![[Pasted image 20240913155857.png]]
![[Pasted image 20240913155807.png]]
6个：
![[Pasted image 20240913155829.png]]
7个：
